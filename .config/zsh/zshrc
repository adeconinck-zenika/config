zhome=$(dirname $(realpath ~/$(readlink ~/.zshrc)))
zinstalls=$zhome/zinstalls

# create zinstalls if not exist
if [ ! -d $zinstalls ];then
  mkdir $zinstalls
fi

# scan zpath and add to path
if [ -f $zhome/zpath ];then
  for pathCandidate in $(cat $zhome/zpath 2>/dev/null || echo);do
    pathCandidate=$(eval echo $pathCandidate)
    if [ -d "$pathCandidate" ];then
      export PATH="$pathCandidate:$PATH"
    fi
  done
fi

# zsources
if [ -f $zhome/zsources ];then
  for toSource in $(cat $zhome/zsources 2>/dev/null || echo);do
    if [ -f $zhome/zinits/$toSource ];then
      source $zhome/zinits/$toSource
    else
      echo "$zhome/zinits/$toSource not found => not sourced" >2
    fi
  done
fi

unset zhome
unset zinstalls
